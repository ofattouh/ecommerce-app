jQuery(document).ready(function(a){"use strict";function b(b){if(b.is(".processing"))return!1;var e=a(".payment_method_moneris"),f=e.find(".js-wc-payment-gateway-payment-token:checked").val();if(f)return!0;var g=[],h=e.find(".js-wc-payment-gateway-account-number").val(),i=e.find(".js-wc-payment-gateway-csc").val(),j=e.find(".js-wc-payment-gateway-card-exp-month").val(),k=e.find(".js-wc-payment-gateway-card-exp-year").val();h=h.replace(/-|\s/g,""),h?((h.length<12||h.length>19)&&g.push(wc_moneris_params.card_number_length_invalid),/\D/.test(h)&&g.push(wc_moneris_params.card_number_digits_invalid),c(h)||g.push(wc_moneris_params.card_number_invalid)):g.push(wc_moneris_params.card_number_missing);var l=(new Date).getFullYear();return(/\D/.test(j)||/\D/.test(k)||j>12||j<1||k<l||k>l+20)&&g.push(wc_moneris_params.card_exp_date_invalid),"undefined"!=typeof i&&(i?(/\D/.test(i)&&g.push(wc_moneris_params.cvv_digits_invalid),(i.length<3||i.length>4)&&g.push(wc_moneris_params.cvv_length_invalid)):g.push(wc_moneris_params.cvv_missing)),g.length>0?(d(b,g),!1):(e.find(".js-wc-payment-gateway-account-number").val(h),!0)}function c(a){for(var b=0,c=0,d=a.length;c<d-1;c++){var e=parseInt(a.substr(d-(c+2),1)*(2-c%2),10);b+=e<10?e:e-9}return parseInt(a.substr(d-1),10)===(10-b%10)%10}function d(b,c){a(".woocommerce-error, .woocommerce-message").remove(),b.prepend('<ul class="woocommerce-error"><li>'+c.join("</li><li>")+"</li></ul>"),b.removeClass("processing").unblock(),b.find(".input-text, select").blur(),a("html, body").animate({scrollTop:b.offset().top-100},1e3)}function e(){a("input.js-wc-moneris-payment-token").change(function(){var b=a("input.js-wc-moneris-payment-token:checked").val(),c=a("div.js-wc-moneris-new-payment-method-form");b?(c.slideUp(200),wc_moneris_params.require_csc&&a(".js-wc-moneris-new-payment-method-form").after(a(".js-wc-moneris-csc").parent())):(c.slideDown(200),wc_moneris_params.require_csc&&a(".js-wc-moneris-csc-clear").before(a(".js-wc-moneris-csc").parent()))}).change(),a("input#createaccount").change(function(){var b;b=a("input.js-wc-moneris-tokenize-payment-method").closest("p.form-row"),a(this).is(":checked")?(b.slideDown(),b.next().show()):(b.hide(),b.next().hide())}).change()}a("form.checkout").length?(a("body").bind("updated_checkout",function(){e()}),a("form.checkout").bind("checkout_place_order_moneris",function(){return b(a(this))})):(e(),a("form#order_review").submit(function(){if("moneris"===a("#order_review input[name=payment_method]:checked").val())return b(a(this))}))});